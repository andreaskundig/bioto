<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" 
                    "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
  <script src="jquery-1.4.4.min.js"></script>
  <link rel="stylesheet" href="qunit.css" type="text/css" media="screen" />
<script type="text/javascript" src="qunit.js"></script>
<script type="text/javascript" src="bio.js"></script>

  <script>
  $(document).ready(function(){

  var text = {text: "En 2001, <elle:pronom_feminin> vient avec <Christophe:nom_masculin_2>. La prestation de <Loana:nom_feminin_1> est pas mal.",
 placeholders:[["Loana", "nom_feminin_1"], 
	  ["Christophe", "nom_masculin_2"], ["elle", "pronom_feminin"]] };
  

 test("build_paragraph",function() {
    var text = {text: "En 2001, <Loana:nom_feminin_1> vient.",
	    placeholders:[["Loana", "nom_feminin_1"]] };
    replaced = build_paragraph (text,["aaa","bb"]);

    equal(replaced,"En 2001, <span class=\"r\">aaa</span><span class=\"o\">Loana</span> vient.");
   
 });

 test("span_words",function(){
   var text = span_words("En 01, <span class='o'>Loa na</span> vient sf<span> ah ah </span>bof. <br>hop");
   equal(text,
"<span>En&nbsp;</span><span>01,&nbsp;</span><span class='o'>Loa na</span><span>&nbsp;</span><span>vient&nbsp;</span><span>sf</span><span> ah ah </span><span>bof.&nbsp;</span><br><span>hop</span>");
 });
   
 test("map_placeholders", function() {
   var ph, map, nom_m;
   ph = [["Loana", "nom_feminin_1"], ["Christophe", "nom_masculin_2"], 
	  ["elle", "pronom_feminin"]];
   map = map_placeholders(ph,["a","b"]);
   deepEqual( map["nom_feminin_1"], "a", "");
   deepEqual( map["nom_masculin_2"], "b", "");
   deepEqual( map["pronom_feminin"], "elle", ""); 

   map = map_placeholders(ph,["a", "b", "c", "d"]);
   deepEqual( map["nom_feminin_1"], "a", "");
   nom_m = map["nom_masculin_2"];
   ok( $.inArray(nom_m, ["b", "c", "d"])>-1, "");
   deepEqual( map["pronom_feminin"], "elle", "");
 });

test(" fix_apostrophe", function(){
 var fixed = fix_apostrophe("le <raton:nom_masculin_3> mange", "raton", 
	    "animal");
 equal(fixed,"<span class=\"r\">l'</span><span class=\"o\">le </span>"
	    +"<raton:nom_masculin_3> mange");

 fixed=fix_apostrophe("le <raton:nom_masculin> mange", "raton", "animal");
 equal(fixed, "<span class=\"r\">l'</span><span class=\"o\">le </span>"
		+"<raton:nom_masculin> mange");

 fixed=fix_apostrophe("le <raton (o):nom_masculin> mange", "raton (o)",
		    "animal");
 equal(fixed, "<span class=\"r\">l'</span><span class=\"o\">le </span>"
		    +"<raton (o):nom_masculin> mange");

 fixed=fix_apostrophe("du <raton:nom_masculin>", "raton", "animal");
 equal(fixed, "du <raton:nom_masculin>");


 fixed = fix_apostrophe("l'<animal:nom_masculin_3> mange", "animal",
			"raton");
 equal(fixed, "<span class=\"r\">le </span><span class=\"o\">l'</span>"
		    +"<animal:nom_masculin_3> mange");

 fixed = fix_apostrophe("vénérable <animal:nom_masculin_3> me", "animal",
			    "raton");
  equal(fixed, "vénérable <animal:nom_masculin_3> me");

  fixed = fix_apostrophe("l'<animal:nom_feminin> mange", "animal",
				"raton");
  equal(fixed, "<span class=\"r\">la </span><span class=\"o\">l'</span>"
		+"<animal:nom_feminin> mange");

  fixed = fix_apostrophe("qu'<animal:nom_feminin> mange", "animal",
				    "raton");
  equal(fixed, "<span class=\"r\">que </span><span class=\"o\">qu'</span>"
		+"<animal:nom_feminin> mange");
});

});

  </script>
  
</head>
<body>
  <h1 id="qunit-header">QUnit example</h1>
 <h2 id="qunit-banner"></h2>
 <div id="qunit-testrunner-toolbar"></div>
 <h2 id="qunit-userAgent"></h2>
 <ol id="qunit-tests"></ol>
 <div id="qunit-fixture">test markup, will be hidden</div>
</body>
</html>
